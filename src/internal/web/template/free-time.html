{{define "free-time"}}
<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Are you free? _free-time_</title>
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/header.css" />
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="stylesheet" href="../css/free-time.css" />
    <link rel="stylesheet" href="../css/calendar.css" />
  </head>
  <body>
    <header class="header-wrapper bg-white">
      <div class="header-wrapper-line bg-white">
        <div class="header flex m-auto items-center bg-white">
          <div class="header-link-wrapper">
            <a href="/index">
              <div class="header-link">
                <p class="font-24 letter-005">TOP</p>
              </div>
            </a>
          </div>
          <div class="header-link-wrapper">
            <a href="/free-time">
              <div class="header-link">
                <p class="font-24 letter-005">NEAREST FREE-TIME</p>
              </div>
            </a>
          </div>
          <div class="header-link-wrapper">
            <a href="/free-times">
              <div class="header-link">
                <p class="font-24 letter-005">FREE-TIMES</p>
              </div>
            </a>
          </div>
          <div class="header-link-wrapper">
            <a href="/share/with_someone">
              <div class="header-link">
                <p class="font-24 letter-005">SHARE</p>
              </div>
            </a>
          </div>
          <div class="header-link-wrapper">
            <a href="/account/">
              <div class="header-link">
                <p class="font-24 letter-005">ACCOUNT</p>
              </div>
            </a>
          </div>
          <div id="today-wrapper" class="text-center font-24">
            <span id="today" class="blinking"></span>
          </div>
        </div>
      </div>
    </header>

    <main class="main">
      {{ if not .error_message }}
      <div class="free-time-header-wrapper flex-col">
        <div class="upper-area-wrapper flex">
          <div class="upper-left-area"></div>
          <div class="upper-right-area"></div>
        </div>
        <div class="header-area-wrapper flex">
          <div class="header-left-area flex justify-center items-center">
            {{ if and .year .month .day .weekday}}
              <p class="font-20 bold">
                {{.year}}/{{.month}}/{{.day}}（{{.weekday}}）
              </p>
            {{ else }}
            {{ end }}

          </div>
          <div class="header-right-area">
            <ul >
              <li>6</li>
              <li>7</li>
              <li>8</li>
              <li>9</li>
              <li>10</li>
              <li>11</li>
              <li>12</li>
              <li>13</li>
              <li>14</li>
              <li>15</li>
              <li>16</li>
              <li>17</li>
              <li>18</li>
              <li>19</li>
              <li>20</li>
              <li>21</li>
              <li>22</li>
              <li>23</li>
              <li>24</li>
            </ul>

        </div>
        </div>
      </div>

      <div class="content-wrapper flex">
        <div class="select-schedule-left-area border-none border-right flex-col">
          <div class="username-wrapper items-center">
            <div class="username flex justify-center items-center m-auto">
              <p class="font-22">{{ .user.Name }}</p>
            </div>
            {{ range .shared_users }}
            <div class="username flex justify-center items-center m-auto">
              <p class="font-22">{{ .Name }}</p>
            </div>
            {{ end }}
          </div>
        </div>
        <div class="content-right-area flex-col">
          <!-- free-timeを描画 -->
          <canvas id="free-time" width="600" height="400" class="free-time-canvas"></canvas>
        </div>
      </div>

      <!-- エラーメッセージを表示する時 -->
      {{ else }}
      <div class="title-area-wrapper">
        <div class="title-area bg-white">
          <h1 class="text-center">FREE-TIME PAGE</h1>
        </div>
      </div>

      <div class="content-wrapper flex">
        <!-- エラーメッセージ -->
        <p class="error-message-in-free-time font-18 text-darkred">{{ .error_message }}</p>

        <div class="content-left-area border-none border-right mt-66">
          <p class="ml-80 font-16 text-wood">日付を選んで<br>free-timeを操作</p>
          <form
            method="POST"
            class="form-wrapper flex-col items-center"
            >
            <label for="today" class="calendar-label">
              <input class="input-calendar" type="date" name="date" id="today-input" style="font-size:1.1em" />
            </label>
            <div class="content-left-button-wrapper text-center">
              <button class="content-left-button" formaction="/free-time">SELECT</button>
              <button class="content-left-button" formaction="/free-time/create">CREATE</button>
              <button class="content-left-button"formaction="/free-time/update">UPDATE</button>
            </div>
          </form>
        </div>

        <div class="index-content-right-area">
          <div class="calender-wrapper">
            <h1 id="years"></h1>
            <div id="next-prev-button">
              <button id="prev" onclick="prev()">‹</button>
              <button id="next" onclick="next()">›</button>
            </div>
            <div id="calendar"></div>
          </div>
        </div>
      </div>
      {{ end }}

    </main>
  </body>
  <script type="text/javascript">
    const date_free_times = JSON.parse('{{marshal .date_free_times}}');
    const free_times = JSON.parse('{{marshal .date_free_time.FreeTimes}}');
    const shared_date_free_times = JSON.parse('{{marshal .shared_date_free_times}}');

  </script>
  <script type="text/javascript" src="../js/now.js"></script>
  <script type="text/javascript" src="../js/free-time.js"></script>
  <script src="../js/calendar.js"></script>


</html>
{{end}}
